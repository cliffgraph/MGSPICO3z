# MUDRV\.COMを使用した曲データの再生

2025/11/30 harumakkin

##### MUDRV\.COMとは
体験版「プリンセスメーカー」で使用されている音源ドライバです。このMUDRV\.COMを使用することで、(株)マイクロキャビンが過去発売したMSX向けゲームソフト内のBGMデータを再生して鑑賞することができます。
この体験版「プリンセスメーカー」は、パソコン雑誌 MSX・FAN 1992年6月号に付属していた「スーパー付録ディスク#9」に収録されています。
何はともあれゲームソフトのBGMを聴くにはMUDRV\.COM「スーパー付録ディスク#9」が必要です。

##### MGSPICO3zでMUDRV\.COMを使用する
MGSPICO3z v3.4.2 では、MUDRV\.COMを利用して、Table.1のゲームソフトのBGMデータ再生を行うことができます。
（これ以外のマイクロキャビン製のMSX向けゲームソフトは所持していないため再生できていません）
MGSPICO3zによる再生では、ゲームソフトから事前にBGMデータを抽出してファイル化しておく必要があります。この抽出ファイル化するスクリプトが「mudrv_musics」に格納されていて、ゲームソフトのイメージファイルからこの抽出スクリプトを使用して、BGMファイルを抜き出しSDカードにコピーしておき、そのBGMファイルをMGSPICO3zがMUDRV\.COMを使用して再生するという仕組みです。

Table.1 MGSPICO3z対応タイトル
|タイトル|対応機種|FD枚数|ディスク名|イメージファイル名|
|:--|:--|:-:|:--|:--|
|Xak|MSX2|3|ディスクNo.1<br>ディスクNo.2<br>ディスクNo.3|XAK_D1.dsk<br>XAK_D2.dsk<br>XAK_D3.dsk|
|XakⅡ|MSX2|5|ディスクNo.1<br>ディスクNo.2<br>ディスクNo.3<br>ディスクNo.4<br>ディスクNo.5|Xak2_D1.dsk<br>Xak2_D2.dsk<br>Xak2_D3.dsk<br>Xak2_D4.dsk<br>Xak2_D5.dsk|
|FRAY|MSX2|4|ゲーム・ディスク0<br>ゲーム・ディスク1<br>デモ・ディスク0<br>デモ・ディスク1|FRAY_G0.dsk<br>FRAY_G1.dsk<br>FRAY_D0.dsk<br>FRAY_D1.dsk|
|FRAY|turboR|5|ゲーム・ディスク0<br>ゲーム・ディスク1<br>デモ・ディスク0<br>デモ・ディスク1<br>デモ・ディスク2|FRAY_G0.dsk<br>FRAY_G1.dsk<br>FRAY_D0.dsk<br>FRAY_D1.dsk<br>FRAY_D2.dsk|
|幻影都市|turboR|8|ディスクNo.1<br>ディスクNo.2<br>ディスクNo.3<br>ディスクNo.4<br>ディスクNo.5<br>ディスクNo.6<br>ディスクNo.7<br>ディスクNo.8<br>|ILLCity_No1.dsk<br>ILLCity_No2.dsk<br>ILLCity_No3.dsk<br>ILLCity_No4.dsk<br>ILLCity_No5.dsk<br>ILLCity_No6.dsk<br>ILLCity_No7.dsk<br>ILLCity_No8.dsk|
|キャビンパニック|MSX2|3|ディスクNo.1<br>ディスクNo.2<br>ディスクNo.3|THE_TOWER_OF_CABIN_1.dsk<br>THE_TOWER_OF_CABIN_2.dsk<br>THE_TOWER_OF_CABIN_3.dsk|
|キャンペーン版大戦略II|MSX2|2|システムディスク<br>データディスク|CAMP_DAISENRYAKU2_MSX2.dsk<br>|
|プリンセスメーカー(体験版)|MSX2|-|-|
|倉庫番パーフェクト|MSX2|1|-|－|

##### BGMデータ抽出の前準備
1. とにもかくにも、「スーパー付録ディスク#9」及び、各種ゲームソフトを準備します
2. ゲームソフトのイメージディスクを作成する環境と、抽出スクリプトを実行する環境が必要です。
3. Table.1のゲームソフトのうちプリンセスメーカー(体験版)と倉庫番パーフェクト以外のゲームソフトについて、そのフロッピーディスクのディスクイメージファイル(720KBサイズの.DSKファイル)を作成します。イメージファイルの名称は必ず、Table.1の「イメージファイル名」に合わせてください。それ以外の名称では抽出スクリプトが正しく動作しません。

##### BGMデータの抽出
1. プリンセスメーカー(体験版)、倉庫番パーフェクトに関しては別項を参照してください。
2. 「mudrv_musics」フォルダ内に、「disks」フォルダを作成し、そのフォルダに各.DSKファイルをコピーします。
3. 「mudrv_musics」フォルダ内の、START_Extract_all_BGM_files.cmd」を実行します。
4. 「MUDRV」フォルダが生成されます。このフォルダ内に各.DSKファイルから抽出したBGMデータファイルが格納されます。
5. 「MUDRV」フォルダごとSDカードのルートにコピーします
6. 「スーパー付録ディスク#9」内のMUDRV\.COMをSDカードのルートにコピーします
7. MGSPICO3zの設定画面のmusicでMUDRVを選択します

###### プリンセスメーカー(体験版)の場合
1. 「MUDRV」フォルダ内に、「PRIMADEM」フォルダを作成します
2. 「スーパー付録ディスク#9」の下記ファイルを「PRIMADEM」にコピーします
3. コピーしたら、"コピー先でのファイル名称"の通りにファイル名称を変更してください

|ファイル名|コピー先でのファイル名称|
|:--|:--|
|PM_KIKI.BIN|PM_KIKI.KIK|
|PM03_F.BGM|PM03_F.MUD|
|PM03_P.BGM|PM03_P.MUD|
|PM08_F.BGM|PM08_F.MUD|
|PM08_P.BGM|PM08_P.MUD|

###### 倉庫番パーフェクトの場合
1. 「MUDRV」フォルダ内に、「SBP」フォルダを作成します
2. 「倉庫番パーフェクト」ディスク内の下記ファイルを「SBP」にコピーします
3. コピーしたら、"コピー先でのファイル名称"の通りにファイル名称を変更してください

|ファイル名|コピー先でのファイル名称|
|:--|:--|
|SBPVOICE.BIN|SBPVOICE.KIK|
|SBPBGM0.BIN|SBPBGM0.MUD|
|SBPBGM1.BIN|SBPBGM1.MUD|
|SBPBGM2.BIN|SBPBGM2.MUD|
|SBPBGM3.BIN|SBPBGM3.MUD|
|SBPBGM4.BIN|SBPBGM4.MUD|
|SBPBGM5.BIN|SBPBGM5.MUD|

##### 注意事項
- .KIKファイルは音色データ、.MUDファイルが曲データです。お互いの格納場所を変えないでください。音色データの紐づけができず正しい音色で発声できなくなります。ディレクトリ、ファイル名すべて抽出した時のまま使用してください（キャビンパニック以外は、拡張子と格納位置がそのままでしたらファイル名を変更する程度は可能です。キャビンパニックだけは他と異なり.KIKファイル名を曲データ内に抽出時に埋め込んでおいて再生時にその名称を使用するようにしたので、そのまま使用してください）
- MGSPICO3zのおまけ機能ですので、正しく動作しない箇所があっても多めに見てください。再生できないデータもあります、また、ノイズの乗る曲データもあります。大目に見てください。
- 手持ちのゲームソフトを試験台にして抽出スクリプトを作成しました。同じタイトルのゲームソフトであってもバージョン違いが実は存在し抽出スクリプトではただしくデータを抽出できない、なんてこともあるかもしれません。その際のはあきらめて下さい。
- 曲の終わりを判定していないため（できるかまで調査していません）曲の順次再生を行えません。一曲再生したらそれを再生し続けます。
- もともと公開されている実行ファイルや曲データでないので、抽出ファイルしたファイルの一般公開はおやめください。

##### 謝辞
- やりにげさん（@Holiday_Program）から、体験版「プリンセスメーカー」の音源ドライバでマイクロキャビンのBGMデータを再生できるとの情報をい


